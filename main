<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°°í„°ë¦¬ ìˆ˜ëª… ì˜ˆì¸¡ê¸° (Re, Rct)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb;
        }
        .capacity-bar {
            transition: width 0.5s ease-in-out;
        }
        input::placeholder {
            color: #9ca3af;
        }
    </style>
</head>
<body class="p-4 flex flex-col items-center justify-center min-h-screen">

    <div id="app" class="w-full max-w-md bg-white shadow-xl rounded-2xl p-6 md:p-8">
        <header class="text-center mb-6">
            <h1 class="text-3xl font-extrabold text-indigo-800">ë°°í„°ë¦¬ ìˆ˜ëª… ì˜ˆì¸¡ê¸°</h1>
            <p class="text-sm text-gray-500 mt-1">ë‚´ë¶€ ì„í”¼ë˜ìŠ¤(Re, Rct) ê¸°ë°˜ ë‹¤ì¤‘ íšŒê·€ ëª¨ë¸ ì‹œë®¬ë ˆì´ì…˜</p>
        </header>

        <div class="space-y-4">
            
            <div>
                <label for="reInput" class="block text-sm font-medium text-gray-700">ì˜´ ì €í•­ (Re, Î©)</label>
                <div class="mt-1">
                    <input type="number" id="reInput" placeholder="ì˜ˆì‹œ: 0.05" step="0.01"
                           class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 shadow-sm"
                           value="">
                </div>
            </div>

            <div>
                <label for="rctInput" class="block text-sm font-medium text-gray-700">ì „í•˜ ì´ë™ ì €í•­ (Rct, Î©)</label>
                <div class="mt-1">
                    <input type="number" id="rctInput" placeholder="ì˜ˆì‹œ: 0.15" step="0.01"
                           class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 shadow-sm"
                           value="">
                </div>
            </div>

            <button id="predictButton"
                    class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-md text-sm font-semibold text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out">
                SOH ì˜ˆì¸¡ ë° ìˆ˜ëª… ì§„ë‹¨ ì‹œì‘
            </button>
        </div>

        <div id="resultBox" class="mt-6 p-5 border-2 rounded-xl" style="display: none;">
            <h2 class="text-lg font-bold mb-3 text-gray-800">ğŸ“‹ ì§„ë‹¨ ê²°ê³¼</h2>
            
            <div class="mb-4">
                <p class="text-sm font-medium text-gray-600 flex justify-between">
                    <span>ì˜ˆì¸¡ ì”ì¡´ ìš©ëŸ‰ (SOH)</span>
                    <span id="capacityPercent" class="font-extrabold text-indigo-600">--%</span>
                </p>
                <div class="w-full bg-gray-200 rounded-full h-3 mt-1.5 overflow-hidden">
                    <div id="capacityBar" class="capacity-bar h-3 rounded-full" style="width: 0%; background-color: #4f46e5;"></div>
                </div>
            </div>

            <div class="p-3 rounded-lg border bg-opacity-10" id="statusMessageContainer">
                <p id="statusIcon" class="text-2xl inline-block mr-2 align-middle">...</p>
                <p id="statusText" class="text-base font-semibold inline-block text-gray-700">ì§„ë‹¨ ê²°ê³¼ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.</p>
                <p id="statusDetail" class="text-xs mt-1 text-gray-500"></p>
            </div>
            
            <div id="warningMessage" class="mt-4 text-sm font-medium p-3 bg-red-100 text-red-700 rounded-lg hidden">
                âš ï¸ **ê²½ê³ :** ì˜´ ì €í•­(Re)ê³¼ ì „í•˜ ì´ë™ ì €í•­(Rct) ê°’ì€ 0ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤.
            </div>
        </div>
    </div>

    <footer class="mt-6 text-center">
        <p class="text-xs text-gray-400 font-light tracking-wide">2025 ê¿ˆë‘ë ˆ ë°ì´í„°ê³¼í•™ê³¼ ë¨¸ì‹ ëŸ¬ë‹
        <p class="text-xs text-gray-400 font-light tracking-wide">20708 ì„œì§€ë¯¼</p>
    </footer>

    <script>
        const INTERCEPT = 1.1307; 
        const COEF_RE = 2.3605;   
        const COEF_RCT = -3.9040; 

        const EOL_THRESHOLD = 0.80; 

        const reInput = document.getElementById('reInput');
        const rctInput = document.getElementById('rctInput');
        const predictButton = document.getElementById('predictButton');
        const resultBox = document.getElementById('resultBox');
        const capacityPercentDisplay = document.getElementById('capacityPercent');
        const capacityBar = document.getElementById('capacityBar');
        const statusMessageContainer = document.getElementById('statusMessageContainer');
        const statusIcon = document.getElementById('statusIcon');
        const statusText = document.getElementById('statusText');
        const statusDetail = document.getElementById('statusDetail');
        const warningMessage = document.getElementById('warningMessage');


        function toFixedNoScientific(num, fixed) {
            if (Math.abs(num) < 1.0) {
                const s = num.toFixed(20);
                return s.match(new RegExp('^-?\\d+(?:.\\d{0,' + (fixed || -1) + '})?'))[0];
            } else {
                return num.toString().match(new RegExp('^-?\\d+(?:.\\d{0,' + (fixed || -1) + '})?'))[0];
            }
        }

        function performPrediction() {
            const ReVal = parseFloat(reInput.value);
            const RctVal = parseFloat(rctInput.value);

            if (isNaN(ReVal) || isNaN(RctVal) || ReVal < 0 || RctVal < 0) {
                warningMessage.classList.remove('hidden');
                resultBox.style.display = 'none';
                return;
            } else {
                warningMessage.classList.add('hidden');
            }

            let predictedCapacity = INTERCEPT + (COEF_RE * ReVal) + (COEF_RCT * RctVal);

            predictedCapacity = Math.max(0.00, Math.min(1.00, predictedCapacity));

            const capacityPercentage = predictedCapacity * 100;
            const percentageDisplay = toFixedNoScientific(capacityPercentage, 2);

            resultBox.style.display = 'block';
            capacityPercentDisplay.textContent = `${percentageDisplay}%`;
            capacityBar.style.width = `${capacityPercentage}%`;
            
            let status = '';
            let icon = '';
            let detail = '';
            let barColor = '';
            let statusBgColor = '';
            let statusBorderColor = '';

            if (predictedCapacity >= 0.95) {
                status = 'ë§¤ìš° ìš°ìˆ˜ (Excellent)';
                icon = 'âœ¨';
                detail = 'ìƒˆ ë°°í„°ë¦¬ì— ê°€ê¹Œìš´ ìµœì ì˜ ì„±ëŠ¥ì„ ìœ ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤.';
                barColor = 'bg-green-600';
                statusBgColor = 'bg-green-100';
                statusBorderColor = 'border-green-300';
            } else if (predictedCapacity >= EOL_THRESHOLD) {
                status = 'ì •ìƒ ë²”ìœ„ (Good)';
                icon = 'ğŸ‘';
                detail = `ì”ì¡´ ìš©ëŸ‰ì´ ${EOL_THRESHOLD * 100}% ì´ìƒì…ë‹ˆë‹¤. ì •ìƒ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.`;
                barColor = 'bg-indigo-600';
                statusBgColor = 'bg-indigo-100';
                statusBorderColor = 'border-indigo-300';
            } else {
                status = 'ìˆ˜ëª… ì¢…ë£Œ (EOL) ì„ë°•';
                icon = 'ğŸš¨';
                detail = `ìš©ëŸ‰ì´ ${EOL_THRESHOLD * 100}% ë¯¸ë§Œìœ¼ë¡œ ë–¨ì–´ì¡ŒìŠµë‹ˆë‹¤. ì„±ëŠ¥ ì €í•˜ ë° êµì²´ê°€ í•„ìš”í•©ë‹ˆë‹¤.`;
                barColor = 'bg-red-600';
                statusBgColor = 'bg-red-100';
                statusBorderColor = 'border-red-300';
            }
            capacityBar.className = `capacity-bar h-3 rounded-full ${barColor}`;
            statusMessageContainer.className = `p-3 rounded-lg border ${statusBgColor} ${statusBorderColor}`;
            statusIcon.textContent = icon;
            statusText.textContent = status;
            statusDetail.textContent = detail;
        }

        predictButton.addEventListener('click', performPrediction);
    </script>
</body>
</html>
